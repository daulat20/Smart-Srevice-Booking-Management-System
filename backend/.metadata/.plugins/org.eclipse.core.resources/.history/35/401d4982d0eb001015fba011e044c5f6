package com.service_booking.service;

import org.springframework.stereotype.Service;

import com.service_booking.entity.Role;
import com.service_booking.entity.User;
import com.service_booking.repository.RoleRepository;

@Service
public class RoleService {
	
	RoleRepository role;
	
	 public User register(User user) {

	        if (user == null) {
	            throw new IllegalArgumentException("User cannot be null");
	        }

	        if (user.getRole() == null || user.getRole().getId() == null) {
	            throw new IllegalArgumentException("Role must be provided");
	        }

	        // Fetch role from DB to ensure it exists
	        Role role = roleRepository.findById(user.getRole().getId())
	                .orElseThrow(() -> new RuntimeException("Invalid role id"));

	        user.setRole(role);

	        return userRepository.save(user);
	    }

}
